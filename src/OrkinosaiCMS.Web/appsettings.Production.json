{
  "_comment": "PRODUCTION CONFIGURATION: This file contains production-specific settings including database connection strings. This file is loaded when ASPNETCORE_ENVIRONMENT=Production.",
  "_deploymentNote": "REQUIRED ACTION: Update the ConnectionStrings:DefaultConnection value with your actual SQL Server credentials before deploying to production. The application CANNOT START without a valid connection string.",
  "_securityWarning": "SECURITY NOTE: This file contains sensitive database credentials. Protect this file appropriately: 1) Restrict file system permissions, 2) Use .gitignore to prevent committing sensitive values, 3) Consider environment-specific deployment strategies. While environment variables or Azure Key Vault provide additional security, this configuration method is supported for production deployments where file-based configuration is preferred.",
  "_startupBehavior": "On startup with AutoApplyMigrations=true, the application will: 1) Connect to SQL Server using DefaultConnection, 2) Automatically apply all pending migrations, 3) Create required tables (AspNetUsers, AspNetRoles, etc.), 4) Seed default admin user, 5) Start accepting requests. If connection fails, the application will log detailed error messages and refuse to start (HTTP 500.30).",
  "Logging": {
    "LogLevel": {
      "Default": "Warning",
      "Microsoft.AspNetCore": "Information"
    }
  },
  "Serilog": {
    "MinimumLevel": {
      "Default": "Error",
      "Override": {
        "Microsoft.AspNetCore": "Warning"
      }
    },
    "WriteTo": [
      {
        "Name": "Console",
        "Args": {
          "outputTemplate": "[{Timestamp:yyyy-MM-dd HH:mm:ss.fff zzz}] [{Level:u3}] [{SourceContext}] {Message:lj}{NewLine}{Exception}"
        }
      }
    ],
    "Enrich": [ "FromLogContext", "WithMachineName", "WithThreadId" ]
  },
  "AllowedHosts": "*",
  "DatabaseEnabled": true,
  "DatabaseProvider": "SqlServer",
  "Database": {
    "AutoApplyMigrations": true,
    "_autoApplyMigrationsNote": "For production with strict change control, set Database__AutoApplyMigrations=false via environment variable and apply migrations manually during deployment."
  },
  "ConnectionStrings": {
    "_comment": "PRODUCTION DATABASE CONNECTION: Configure your SQL Server connection string below. This file is used when ASPNETCORE_ENVIRONMENT=Production.",
    "_securityNote": "IMPORTANT: While this file allows direct configuration, ensure you protect appsettings.Production.json from unauthorized access. Consider using Azure Key Vault or environment variables for additional security layers in highly sensitive environments.",
    "_instructions": "REQUIRED: Update the DefaultConnection string below with your actual SQL Server details. Replace the placeholder values (YOUR_SERVER, YOUR_DATABASE, etc.) with your production database information.",
    "_poolingSettings": "IMPORTANT: Include connection pooling settings to prevent HTTP 503 errors. Recommended: Max Pool Size=100, Min Pool Size=5, Pooling=true. These are automatically applied if not present in the connection string.",
    "_troubleshooting": {
      "error_40": "If you see 'error 40 - Could not open a connection to SQL Server', verify: 1) Server name is correct and accessible, 2) Firewall allows connections, 3) SQL Server is running",
      "error_500_30": "HTTP 500.30 startup errors indicate connection string issues or missing migrations. Check logs for specific SQL errors.",
      "error_503": "HTTP 503 Service Unavailable errors can be caused by connection pool exhaustion. Ensure Max Pool Size is set appropriately (default: 100) and connections are properly disposed.",
      "access_denied": "Win32Exception Access Denied (error 5) means Windows authentication failed or service account lacks permissions. Use SQL authentication with User ID/Password instead.",
      "migrations": "Database migrations run automatically on startup when AutoApplyMigrations=true. Essential tables (AspNetUsers, etc.) will be created during first startup."
    },
    "_exampleAzureSQL": "Server=tcp:yourserver.database.windows.net,1433;Initial Catalog=YourDatabase;Persist Security Info=False;User ID=yourusername;Password=yourpassword;MultipleActiveResultSets=False;Encrypt=True;TrustServerCertificate=False;Connection Timeout=30;Max Pool Size=100;Min Pool Size=5;Pooling=true",
    "_exampleLocalSQL": "Server=YOUR_SERVER_NAME;Database=YOUR_DATABASE;User ID=YOUR_USERNAME;Password=YOUR_PASSWORD;Encrypt=True;TrustServerCertificate=True;MultipleActiveResultSets=True;Connection Timeout=30;Max Pool Size=100;Min Pool Size=5;Pooling=true",
    "_exampleSQLExpress": "Server=localhost\\SQLEXPRESS;Database=OrkinosaiCMS_Production;User ID=sa;Password=YOUR_SA_PASSWORD;Encrypt=True;TrustServerCertificate=True;MultipleActiveResultSets=True;Max Pool Size=100;Min Pool Size=5;Pooling=true",
    "DefaultConnection": "Server=tcp:YOUR_SERVER.database.windows.net,1433;Initial Catalog=YOUR_DATABASE;Persist Security Info=False;User ID=YOUR_USERNAME;Password=YOUR_PASSWORD;MultipleActiveResultSets=False;Encrypt=True;TrustServerCertificate=False;Connection Timeout=30;Max Pool Size=100;Min Pool Size=5;Pooling=true"
  },
  "CMS": {
    "SiteName": "Mosaic CMS",
    "DefaultTheme": "Default",
    "EnableModuleDiscovery": false,
    "AllowRegistration": false
  },
  "Authentication": {
    "_comment": "Production OAuth credentials MUST be set via Azure App Service Configuration or Environment Variables for security. NEVER commit production credentials to source control.",
    "Google": {
      "ClientId": "",
      "ClientSecret": ""
    }
  },
  "ErrorHandling": {
    "ShowDetailedErrors": false,
    "IncludeStackTrace": false
  }
}
