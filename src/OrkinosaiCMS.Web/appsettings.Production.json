{
  "_comment": "PRODUCTION CONFIGURATION: This file contains production-specific settings. This file is loaded when ASPNETCORE_ENVIRONMENT=Production.",
  "_deploymentNote": "REQUIRED ACTION: Connection string MUST be configured via Azure App Service Configuration (Connection Strings section) or environment variable 'ConnectionStrings__DefaultConnection'. DO NOT hardcode credentials in this file.",
  "_securityWarning": "SECURITY: Never commit database credentials to source control. Use Azure App Service Configuration or Azure Key Vault for production credentials. This is a security best practice and prevents accidental exposure of sensitive data.",
  "_startupBehavior": "On startup with AutoApplyMigrations=true, the application will: 1) Connect to SQL Server using DefaultConnection from Azure Configuration, 2) Automatically apply all pending migrations, 3) Create required tables (AspNetUsers, AspNetRoles, etc.), 4) Seed default admin user, 5) Start accepting requests. If connection string is not set or connection fails, the application will log detailed error messages and refuse to start (HTTP 500.30).",
  "Logging": {
    "LogLevel": {
      "Default": "Warning",
      "Microsoft.AspNetCore": "Information"
    }
  },
  "Serilog": {
    "MinimumLevel": {
      "Default": "Error",
      "Override": {
        "Microsoft.AspNetCore": "Warning"
      }
    },
    "WriteTo": [
      {
        "Name": "Console",
        "Args": {
          "outputTemplate": "[{Timestamp:yyyy-MM-dd HH:mm:ss.fff zzz}] [{Level:u3}] [{SourceContext}] {Message:lj}{NewLine}{Exception}"
        }
      }
    ],
    "Enrich": [ "FromLogContext", "WithMachineName", "WithThreadId" ]
  },
  "AllowedHosts": "*",
  "DatabaseEnabled": true,
  "DatabaseProvider": "SqlServer",
  "Database": {
    "AutoApplyMigrations": true,
    "_autoApplyMigrationsNote": "For production with strict change control, set Database__AutoApplyMigrations=false via environment variable and apply migrations manually during deployment."
  },
  "ConnectionStrings": {
    "_comment": "PRODUCTION DATABASE CONNECTION: Connection string MUST be configured via Azure App Service Configuration or Environment Variables. DO NOT hardcode credentials in this file.",
    "_requiredConfiguration": "CRITICAL: Set the connection string in ONE of these ways:",
    "_azureAppService": "Recommended: Azure Portal → Your App Service → Configuration → Connection strings → Add 'DefaultConnection' (Type: SQLServer)",
    "_environmentVariable": "Alternative: Set environment variable 'ConnectionStrings__DefaultConnection' with your connection string",
    "_securityWarning": "NEVER commit production credentials to source control. This file should only contain placeholder or documentation.",
    "_poolingSettings": "IMPORTANT: Include connection pooling settings to prevent HTTP 503 errors. Recommended: Max Pool Size=100, Min Pool Size=5, Pooling=true. These are automatically applied if not present in the connection string.",
    "_troubleshooting": {
      "error_40": "If you see 'error 40 - Could not open a connection to SQL Server', verify: 1) Server name is correct and accessible, 2) Firewall allows connections, 3) SQL Server is running",
      "error_500_30": "HTTP 500.30 startup errors indicate connection string issues or missing migrations. Check logs for specific SQL errors. Most commonly: connection string not set in Azure Configuration.",
      "error_503": "HTTP 503 Service Unavailable errors can be caused by connection pool exhaustion. Ensure Max Pool Size is set appropriately (default: 100) and connections are properly disposed of.",
      "access_denied": "Win32Exception Access Denied (error 5) means Windows authentication failed or service account lacks permissions. Use SQL authentication with User ID/Password instead.",
      "migrations": "Database migrations run automatically on startup when AutoApplyMigrations=true. Essential tables (AspNetUsers, etc.) will be created during first startup."
    },
    "_exampleAzureSQL": "Server=tcp:yourserver.database.windows.net,1433;Initial Catalog=YourDatabase;Persist Security Info=False;User ID=yourusername;Password=yourpassword;MultipleActiveResultSets=False;Encrypt=True;TrustServerCertificate=False;Connection Timeout=30;Max Pool Size=100;Min Pool Size=5;Pooling=true",
    "_howToSetInAzure": "1. Go to Azure Portal, 2. Navigate to your App Service, 3. Go to Configuration → Connection strings, 4. Add new connection string named 'DefaultConnection' with Type 'SQLServer', 5. Paste your connection string, 6. Click Save and Restart app",
    "DefaultConnection": ""
  },
  "CMS": {
    "SiteName": "Mosaic CMS",
    "DefaultTheme": "Default",
    "EnableModuleDiscovery": false,
    "AllowRegistration": false
  },
  "Authentication": {
    "_comment": "Production OAuth credentials MUST be set via Azure App Service Configuration or Environment Variables for security. NEVER commit production credentials to source control.",
    "Google": {
      "ClientId": "",
      "ClientSecret": ""
    }
  },
  "ErrorHandling": {
    "ShowDetailedErrors": false,
    "IncludeStackTrace": false
  }
}
